<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>User Dashboard</title>
</head>
<body>
  <h2>Welcome to Your Dashboard</h2>

  <div id="dashboardContent">
    <p><strong>Wallet Balance:</strong> â‚¦<span id="wallet">0</span></p>
    <p><strong>Your Referral Code:</strong> <span id="referralCode"></span></p>
    <p><strong>Your Referral Link:</strong> 
      <input type="text" id="referralLink" readonly style="width: 300px;" />
      <button onclick="copyLink()">Copy</button>
    </p>

    <button id="withdrawBtn">Withdraw</button>
    <p id="message"></p>
  </div>

  <div id="notLoggedIn" style="display: none;">
    <p>You are not logged in. Please <a href="/login.html">log in</a>.</p>
  </div>

  <script>
    const user = JSON.parse(localStorage.getItem('loggedInUser'));

    if (!user) {
      document.getElementById("dashboardContent").style.display = "none";
      document.getElementById("notLoggedIn").style.display = "block";
    } else {
      document.getElementById('wallet').innerText = user.wallet;
      document.getElementById('referralCode').innerText = user.myReferralCode;
      document.getElementById('referralLink').value =
        `https://https://dreal-opjt.onrender.com/signup.html?ref=${user.myReferralCode}`;
    }

    function copyLink() {
      const input = document.getElementById("referralLink");
      input.select();
      document.execCommand("copy");
      document.getElementById("message").innerText = "Referral link copied!";
    }

    document.getElementById('withdrawBtn').addEventListener('click', () => {
      alert("Withdraw system coming soon...");
    });
  </script>
</body>
</html>
